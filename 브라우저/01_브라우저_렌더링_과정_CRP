### 01. 브라우저 렌더링 과정 (with CRP)

---

- 사용자가 주소창에 웹사이트 주소를 입력하고 엔터키를 누르면 해당 사이트의 화면이 표시된다. 단순하면서 당연해보이는 일이지만 주소 입력만으로 화면이 등장하기까지는 복잡한 과정들을 거쳐야 한다.
- 브라우저 렌더링 전체 과정 미리보기

  > 1.  브라우저는 HTML, CSS, JS, 이미지, 폰트 등 리소스를 서버에 요청하고, 응답으로 받아온다.
  > 2.  브라우저 렌더링 엔진은 받아온 HTML, CSS를 파싱해 DOM, CSSOM을 생성하고, 이들을 결합해 렌더 트리를 생성한다.
  > 3.  브라우저 JS 엔진은 받아온 JS를 파싱해 AST를 생성하고, 바이트코드로 변환해 실행한다.
  > 4.  렌더트리를 기반으로 HTML 요소의 레이아웃(위치, 크기)을 계산한다.
  > 5.  화면에 HTML요소를 페인팅한다

<br>

#### 1. 요청과 응답

---

> Step1. 브라우저는 HTML, CSS, JS, 이미지, 폰트 등 리소스를 서버에 요청하고, 응답으로 받아온다.

- 브라우저는 필요한 리소스(HTML, CSS, JS, 이미지, 폰트 등)를 서버에 요청하고, 응답으로 받아와야 한다.
- 브라우저의 요청 및 응답 과정은 아래와 같다.

  1. URL 입력 → 브라우저가 서버 주소(IP) 찾기 (DNS 조회)
     ```scss
         google.com → 142.250.xxx.xxx (예시)
     ```
  2. 서버와 연결 (TCP 핸드쉐이크 → TLS 핸드셰이크)
     - HTTPS의 경우
       - TCP 3-way handshake
       - TLS handshake (암호화 채널 생성)
     - 위 과정을 통해 브라우저와 서버는 안전하게 데이터를 주고받을 준비를 마친다.
  3. HTTP 요청(Request) 보내기

     - 브라우저는 서버에 HTTP 요청을 보낸다.
       ```vbnet
        GET /index.html HTTP/1.1
        Host: www.google.com
        User-Agent: Chrome/...
        Accept: text/html
       ```
     - 대부분의 서버는 기본 문서로 index.html을 응답하도록 설정되어 있다.
       ```sql
        GET /
        위와 같이 요청해도
        GET /index.html
        과 동일한 경우가 많다.
       ```

  4. 서버가 요청을 처리하고 응답(Response) 전송

     - 서버는 브라우저 요청을 처리한 후 HTTP 응답을 돌려준다.

       ```php-template
        HTTP/1.1 200 OK
        Content-Type: text/html

        <!DOCTYPE html>
        <html>
        ...
        </html>
       ```

     - 응답의 구성:
       - 상태 코드 (200, 404, 500 …)
       - 헤더 (Content-Type, Cache-Control 등)
       - 바디(data) → HTML / JSON / 이미지 등 실제 내용

  5. 브라우저는 index.html 뿐 아니라 추가 리소스도 자동 요청

     - 브라우저는 서버에서 받은 index.html을 파싱하기 시작하고, 그 과정에서 필요한 리소스(CSS, JS, 이미지 등)를 추가로 자동 요청한다
     - 예를 들어 HTML 안에 다음이 있다면:
       ```html
       <link rel="stylesheet" href="/styles.css" />
       <script src="/main.js"></script>
       <img src="/logo.png" />
       ```
       브라우저는 다음과 같은 요청을 추가로 보낸다.
       ```
        GET /styles.css
        GET /main.js
        GET /logo.png
       ```

- 요약

1. 주소 입력 → DNS 조회
2. 서버와 연결 (TCP/TLS)
3. 브라우저가 HTTP 요청 전송
4. 서버가 index.html 등 응답 전송
5. 브라우저는 HTML 분석 중 필요한 리소스를 다시 요청
