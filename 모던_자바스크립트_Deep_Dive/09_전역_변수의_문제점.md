### 09. 전역 변수의 문제점

<br>

#### 1. 변수의 생명 주기

---

- 지역 변수의 생명주기는 함수의 생명 주기와 일치한다.

```javascript
function foo() {
  var x = "local";
  console.log(x);
  return x;
}
```

- 위 예제의 foo 함수를 호출하면 다음과 같은 과정이 실행된다.
  - 자바스크립트 엔진에 의해 x 변수의 선언문이 가장 먼저 실행됨
  - x 변수가 선언되고 undefined로 초기화됨
  - 함수 몸체를 구성하는 문들이 순차적으로 실행되며, x 변수에 값이 할당됨
  - 함수가 종료되면 x 변수도 소멸되어 생명 주기가 종료됨

```javascript
var x = "global";

function foo() {
  console.log(x); // undefined
  var x = "local";
}

foo();
console.log(x); // global
```

- 위 예제에서 확인할 수 있듯이 **호이스팅은 스코프를 단위로 동작한다.** 지역 변수의 호이스팅은 지역 변수의 선언이 지역 스코프의 선두로 끌어올려진 것처럼 동작한다. 따라서 지역 변수는 함수 전체에서 유효하다.
- **호이스팅은 변수 선언이 스코프의 선두로 끌어 올려진 것철머 동작하는 자바스크립트 고유의 특징을 말한다.**

<br>

#### 2. 전역 변수의 문제점

---

- **암묵적 결합**
  - 전역 변수를 선언하면 모든 코드가 전역 변수를 참조하고 변경할 수 있는 `암묵적 결합`을 허용하는 것이다.
  - 변수의 유효 범위가 크면 클수록 코드의 가독성은 나빠지고 의도치 않게 상태가 변경될 수 있는 위험성도 높아진다.
- **긴 생명 주기**
  - 젼역 변수를 생명 주기가 길다. 따라서 메모리 리소스도 오랜 기간 소비한다. 또한 전역 변수의 상태를 변경할 수 있는 시간도 길도 기회도 많다.
- **스코프 체인 상에서 종점에 존재**
  - 전역 변수는 스코프 체인 상에서 종점에 존재하기 때문에 검색할 때 가장 마지막에 검색된다. 따라서 **전역 변수의 검색 속도가 가장 느리다.**
- **네임스페이스 오염**
  - 모듈화하지 않으면 다른 파일내에서 동일한 이름으로 명명된 전역 변수나 전역 함수가 같은 스코프 내에 존재할 경우 예상치 못한 결과를 가져올 수 있다.
